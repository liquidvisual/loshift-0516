/*
    CONTEXT-MENU.CSS

    - Last updated: 06.06.16
    - hello@liquidvisual.com
*/
//-----------------------------------------------------------------
// Variables
//-----------------------------------------------------------------

$app-menu-toolbar-width: 55px !default;
$dark-bg-color: $gray-dark;

//-----------------------------------------------------------------
// Menu Structure
//-----------------------------------------------------------------

.lv-context-menu {
	position: fixed;
	top: 0;
	left: 0;
	bottom: 0;
	width: $app-menu-width-small;
	height: 100%;
	// height: 100vh;
	background: $dark-bg-color;
	// z-index: 10;

	@include media-breakpoint-up(md) {
	    width: $app-menu-width-medium;
	}
}

//-----------------------------------------------------------------
// Context Menu Scroller
//-----------------------------------------------------------------

.lv-context-menu-scroller {
	position: absolute;
	top: $lv-topbar-height-medium + $lv-stage-top-offset;
	left: 0;
	bottom: $app-menu-toolbar-width;
	width: 100%;
	overflow: auto; // iOS needs reliable scroll focus
	-webkit-overflow-scrolling: touch;

	@include media-breakpoint-up(md) {
		bottom: 0; // failsafe
	    height: calc(100% - #{$lv-footer-height}); // failsafe
	}

	@include media-breakpoint-up(xl) {
		overflow: hidden; // make scrollbars prettier on desktop only
	}

	&:hover {
		overflow: auto;
	}
}

//-----------------------------------------------------------------
// Header
//-----------------------------------------------------------------

.lv-context-menu-header {
	background: darken($dark-bg-color, 4%);
	text-align: center;
	padding: rem-calc(0 20); // failsafe
	overflow: hidden; // failsafe
	height: $lv-topbar-height-medium + $lv-stage-top-offset;

	@include media-breakpoint-up(md) {
	    margin-left: $app-menu-toolbar-width;
	}

	h3 {
		margin: 0; // failsafe
		padding: 0; // failsafe
		font-family: $font-family-serif;
		font-size: rem-calc(20);
		font-weight: normal;
		line-height: $lv-topbar-height-medium + $lv-stage-top-offset;
		color: $brand-primary;
	}
}

//-----------------------------------------------------------------
// TOOLBAR
//-----------------------------------------------------------------

.lv-context-menu-toolbar {
	@include transition('color');
	position: fixed;
	left: 0;
	bottom: 0; // failsafe
	height: $app-menu-toolbar-width;
	width: 100%;
	background: #151519;

	z-index: 9999999999999999;

	@include media-breakpoint-up(md) {
		top: 0;
    	width: $app-menu-toolbar-width;
        height: 100%;
	}

	a {
		display: block;
		font-size: rem-calc(22);
		text-align: center;
		padding: rem-calc(5 0);
		color: lighten($dark-bg-color, 15%);

		@include media-breakpoint-down(sm) {
		    line-height: $app-menu-toolbar-width;
		    padding: 0;
		}

		&:hover {
			color: lighten($dark-bg-color, 30%);
		}
	}

	.active a {
		color: white;
	}
}

//-----------------------------------------------------------------
// TOOLS
//-----------------------------------------------------------------

.lv-context-menu .lv-context-menu-user-logo {
    padding: rem-calc(14 0);

     .gravitar {
     	border-radius: 100%;
     }
}

//=========================================
// Site Tools
//=========================================

ul.lv-context-menu-site-tools {
	@include media-breakpoint-down(sm) {
		display: table;
		table-layout: fixed;
		width: 100%;
		margin: 0;
		padding: 0;
		float: left;

		li {
			display: table-cell;
		}

		li:first-child {
			display: none;
		}
	}
}

//=========================================
// User Tools
//=========================================

ul.lv-context-menu-user-tools {
	display: none; // hide unless
	position: absolute;
	width: 100%;
	left: 0;
	bottom: $lv-footer-height + 10px;
	// bottom: rem-calc(15);

	@include media-breakpoint-up(md) {
	    display: block;
	}
}

//-----------------------------------------------------------------
// Body
//-----------------------------------------------------------------

.lv-context-menu-body {
	padding: 20px 0; // used to hoist up in dev tablist

	@include media-breakpoint-up(md) {
	    margin-left: $app-menu-toolbar-width; // locked
	}

	//=========================================
	// Anchors
	//=========================================

	a {
		display: block;
		padding: rem-calc(15 20);
		border-bottom: 1px solid lighten($dark-bg-color, 5%);
		margin: rem-calc(0 15);
		line-height: 1.4;
		color: white;

		.lv-context-menu-digit {
			font-family: 'Oswald', sans-serif;
			color: lighten($dark-bg-color, 15%);
			font-size: rem-calc(12);
			padding-right: 20px;
		}

		@include media-breakpoint-up(md) {
	    	padding: rem-calc(10 15);
	        border: 0;
		}
	}

	// --- ACTIVE ---

	.active a {
		background: lighten($dark-bg-color, 8%);
		border-radius: $border-radius-sm;

		@keyframes bounceIn { from { transform: scale(0.0); } to { transform: scale(1.0); } }

		transform: scale(0.0);  /* make things invisible upon start */
		animation: bounceIn ease-out 1;
		animation-fill-mode: forwards;
		animation-duration: 0.2s;
		// animation-delay: 0.05s;

		.lv-context-menu-digit {
			color: lighten($dark-bg-color, 35%);
		}
	}
}

//-----------------------------------------------------------------
// Tablist (Dev menu only)
//-----------------------------------------------------------------

.lv-context-menu-panel-tablist {
	position: relative;
	top: -20px;
	display: table;
	width: 100%;

	li {
		display: table-cell;
		text-align: center;
		width: 50%;

		a {
			margin: 0;
			padding: 15px 0;
			text-transform: uppercase;
			font-size: rem-calc(13);
			background: lighten($dark-bg-color, 5%);
		}
	}

	.active a {
		background: $dark-bg-color;
	}
}

//-----------------------------------------------------------------
// App Menu Lists
//-----------------------------------------------------------------

.lv-context-menu ul {
	list-style: none;
	margin: 0; // failsafe
	padding: 0; // failsafe
}

//-----------------------------------------------------------------
// Motion
//-----------------------------------------------------------------

// .lv-context-menu-header h3,
// .lv-context-menu-body {
//     transition: transform 400ms ease-out;
//     transform: translate(0, -5px);
//     // transform: translateZ(0);
// }

// .menu-is-open .lv-context-menu-header h3,
// .menu-is-open .lv-context-menu-body {
//     transform: translate(0, 0);
// }

.lv-context-menu-toolbar {
    transition: transform 300ms ease-out;
    // transform: translate(50px); // extras
}

.lv-context-menu {
    transition: transform 300ms ease-out, visibility 300ms linear;
    // transform: translate(-50px); // extras
    visibility: hidden;
}

// ANIMATE
.menu-is-open .lv-context-menu-toolbar,
.menu-is-open .lv-context-menu {
    transform: translate(0, 0);
}

.menu-is-open .lv-context-menu {
	visibility: visible; // Clever - reduce scrolling focus bugs with visibility cooldown
}

//-----------------------------------------------------------------
// temporary fix for preview pane
//-----------------------------------------------------------------

.listo {
	> ul > li:nth-child(odd) > a {
		// border-bottom: 1px solid #1E1E24;
		// background: #2F2F37;
		border-radius: 4px;
	}

	> ul > li > a {
		padding-left: 40px;
		position: relative;

		&:before {
			font-family: "FontAwesome";
			content: "\f110";
			// content: "\f096";
			position: absolute;
			left: 10px;
			top: 20px;
			color: $brand-secondary;
			color: #444950;
			font-weight: bold;
		}
	}

	> ul > li:nth-child(3n+1) > a {
		&:before {
			content: "\f046";
			// content: "\f14a";
			content: "\f00c";
			// color: #444950;
			color: $brand-secondary;

		}
	}

	> ul > li:nth-child(1) > a {
		// background: $brand-secondary;
		background: #2F2F37;
	}

	.listo-light {
		color: #535D63 !important;
	}

	ul > li > ul {
		display: none;
	}
}

//-----------------------------------------------------------------
//
//-----------------------------------------------------------------
//=========================================
//
//=========================================